---
title: 'Uso de HTTP feeds en la Suite'
subject: ''
old_url: 'http://emarsys.dev/old/uso-de-http-feeds-en-la-suite/'
---

<span class="mw-headline" id="Introducci.C3.B3n">Introducción<a name="bs-ue-jumpmark-73e851c5c6a04aa8761b44bdf170d25d"></a></span>
----------------------------------------------------------------------------------------------------------------------------------

 Suite es compatible con el uso de HTTP feeds para la realización de tareas de registro de datos en segundo plano, que puede incluir: agregar nuevos datos de contactos, actualizar datos existentes o, incluso, activar correos electrónicos específicos de la transacción. Las HTTP feeds utilizan los vínculos de registro .php que se ejecutan en segundo plano para transferir contenido y activar campañas de correo electrónico personalizadas. Como método para transferir datos proporciona una solución potente y fácil de configurar que no necesita conocimientos de programación para su configuración. No obstante, es importante señalar que es menos seguro que la API de Suite (dado que utiliza URL visibles), es más lento y puede manejar volúmenes menores de tráfico de datos. Usualmente, esta función se aplica cuando se utilizan formularios incrustados para registro o actualización de contactos, activación de correos transaccionales desde una página web y como una forma elegante de crear soluciones que permiten optar entre dos alternativas.

Tipos de HTTP feed disponibles
------------------------------

 Suite utiliza dos tipos de HTTP feed denominados register.php y register_bg.php, los cuales realizan funciones similares con algunas pequeñas variaciones. Se pueden diferenciar por su activación y tipo de transacción, pero desde el punto de vista del cliente, las principales diferencias son la velocidad con la que se procesan las solicitudes y la forma en que el volumen de tráfico les afecta. Ambos son fáciles de configurar y pueden integrarse con software externo (por ej., una tienda Web). Para determinar el tipo a utilizar, se debe tener en cuenta los requisitos del cliente mediante el uso de la siguiente tabla:

<table border="1" cellpadding="1" class="wikitable" style="width: 100%;"><thead><tr><th>Tipo de HTTP feed</th> <td>register.php</td> <td>register_bg.php</td> </tr><tr><th>Inmediatez</th> <td>La solicitud está en cola</td> <td>La solicitud es inmediata</td> </tr><tr><th>Límite de volumen</th> <td>10.000 solicitudes por hora, índice fijo</td> <td>alrededor de 10.000 por hora, variable</td> </tr><tr><th>Rastreo de user_ID</th> <td>no</td> <td>sí</td> </tr><tr><th>Activado por</th> <td>vínculo</td> <td>vínculo</td> </tr><tr><th>Uso de formulario</th> <td>El formulario debe contener todos los campos obligatorios</td> <td>Sólo se requiere la ID del formulario</td> </tr><tr><th>Método de importación de datos</th> <td>formulario</td> <td>importación</td> </tr><tr><th>Manejo de duplicados</th> <td>si (solo campos estándar)</td> <td>si (puede elegirse cualquier campo)</td></tr></thead></table>### <span class="mw-headline" id="register.php">register.php<a name="bs-ue-jumpmark-b1188bdf8f85ae1daa854c3847eabb67"></a></span>

 Este tipo de feed utiliza un formulario Suite para agregar o actualizar contactos y puede utilizarse directamente desde Suite o integrado dentro de una página web. Todos los campos utilizados en la transacción y feed deben existir en el formulario para que esta feed funcione. Las transacciones entrantes de este tipo de feed están en cola y se procesan a una velocidad fija de 10.000 solicitudes por hora. Esto resulta en un rendimiento predecible y muy estable; los altos volúmenes de las transacciones entrantes no afectarán a (ni serán afectadas por) ningún otro aspecto del rendimiento del sistema. El inconveniente de utilizar este tipo de feed es que, debido a que las transacciones están en cola, las actualizaciones de contactos no son inmediatas y no se devuelve el user_ID del contacto. Esto significa que usted no podrá rastrear las actualizaciones de contactos, los correos electrónicos ni las respuestas sin iniciar sesión en su cuenta de Suite. Register.php utiliza el manejo de duplicados estándar (nombre, apellido, dirección de correo electrónico), excepto si se ha definido una clave externa específica para esta cuenta. Su gerente de cuenta le dirá si se ha establecido una clave externa específica. Register.php utiliza los siguientes parámetros. Aquellos resaltados <span style="background: #F08080;">en rojo</span> son obligatorios y deben incluirse para que la HTTP funcione.  

<table border="1" cellpadding="1" class="wikitable" style="width: 100%; background-color: #f08080;"><thead><tr><th>Parámetro</th> <th>Descripción</th> </tr></thead><tbody><tr><td>CID</td> <td>Este es el ID de su cuenta que será suministrada por su gerente de cuenta.</td> </tr><tr><td>inp_*xx*</td> <td>Estos son los campos que se utilizan en la transacción, donde xx es la ID del campo.</td> </tr><tr><td>f</td> <td>Este es elID del formulario que utiliza la transacción y es necesaria para activar el correo electrónico.</td> </tr><tr><td style="background: white;">optin*</td> <td style="background: white;">Este es el estado opt-in del contacto. Se utilizan valores de texto, por ej. *y*=VERDADERO, *n*=FALSO.</td> </tr><tr><td style="background: white;">nl_optin</td> <td style="background: white;">Este es el opt-in utilizado para newsletters. Debe contener la ID del formulario del newsletter al cual está suscrito el contacto.</td> </tr></tbody></table><sup>*</sup> La información de aceptación no es obligatoria, pero debería incluirse para todas las HTTP feeds, excepto para las que son parte de un registro opt-in doble.

#### <span class="mw-headline" id="Ejemplo_de_registro">Ejemplo de registro<a name="bs-ue-jumpmark-0b9f164a34efa41dca93a421f3f8c3a7"></a></span>

 A continuación se muestra un ejemplo de la clase de información que usted podría querer recoger en su página web para luego enviarla a Suite a través de register.php:

<table border="1" cellpadding="1" class="wikitable" style="width: 100%;"><thead><tr><th>Información</th> <th>Parámetro</th> <th>Valor</th> </tr></thead><tbody><tr><td>ID de cuenta</td> <td>CID</td> <td>987654321</td> </tr><tr><td>ID de formulario de registro de Suite</td> <td>f</td> <td>1234</td> </tr><tr><td>Nombre</td> <td>inp_1</td> <td>Joe</td> </tr><tr><td>Apellido</td> <td>inp_2</td> <td>Bloggs</td> </tr><tr><td>Dirección de correo electrónico</td> <td>inp_3</td> <td>joe.bloggs@example.com</td> </tr><tr><td>Estado de opt-in del contacto</td> <td>optin</td> <td>Verdadero (TRUE)</td></tr></tbody></table> Si se crea una HTTP feed con los valores de la tabla anterior, se obtiene la URL siguiente: `<a class="external free" href="http://www1.emarsys.net/u/register.php?CID=987654321&f=1234&p=2&a=r&SID=&el=&llid=&counted=&c=&optin=TRUE&inp_1=Joe&inp_2=Bloggs&inp_3=joe.bloggs@example.com" rel="nofollow" target="_blank">http://www1.emarsys.net/u/register.php?CID=987654321&f=1234&p=2&a=r&SID=&el=&llid=&counted=&c=&optin=TRUE&inp_1=Joe&inp_2=Bloggs&inp_3=joe.bloggs@example.com</a>`

### <span class="mw-headline" id="register_bg.php">register_bg.php<a name="bs-ue-jumpmark-785d3e298153e4b03f050636e6296ae7"></a></span>

 Este tipo de feed utiliza un vínculo que incluye la ID de un formulario Suite y las ID de los campos obligatorios (y en el caso de los campos de elección simple o múltiple, las ID de sus valores), y puede activarse al asociar dicho vínculo con una acción especificada en una página web. A diferencia de register.php, este tipo de feed no requiere que el formulario tenga contenido o que contenga alguno de los campos. Para activar el formulario correctamente, sólo se requiere el ID. Todas las transacciones se procesan de forma inmediata y se devuelve una ID de usuario. Dado que los formularios se procesan de inmediato y sin formar cola, la velocidad de las transacciones individuales variará de acuerdo con el volumen entrante y cualquier otra acción que utilice la base de datos en el mismo momento. Una gran cantidad de registros o una gran cantidad de importaciones o exportaciones disminuirá la velocidad de las solicitudes de forma considerable. En función de su implementación y si su configuración de tiempo de espera es muy restrictiva, puede devolver un falso error. Si usted prevé que los registros alcanzarán un valor máximo en ciertos momentos, puede usar hasta cinco cadenas y debe configurar su tiempo de espera de forma correspondiente. Register_bg.php utiliza un manejo de duplicados más flexible y cualquier campo puede seleccionarse mediante la variable key_id (véase a continuación). Register_bg.php utiliza los siguientes parámetros. Los <span style="background: #F08080;">resaltados en rojo</span> son obligatorios y deben incluirse para que la HTTP feed funcione.

<table border="1" cellpadding="1" class="wikitable" style="width: 100%; background-color: #f08080;"><thead><tr><th>Parámetro</th> <th>Descripción</th> </tr></thead><tbody><tr><td>owner_id</td> <td>Este es su ID de cuenta y puede ser suministrada por su gerente de cuenta</td> </tr><tr><td>key_id</td> <td>Este es el ID del campo que se utiliza como clave externa para el manejo de duplicados. Cualquier campo que se utilice, por ej. el ID de una base de datos externa o la dirección de correo electrónico del contacto, también debe incluirse en los parámetros de campo de la feed.**Nota:** Se puede deshabilitar el manejo de duplicados asignando un valor de n aquí (*key_id=n*). Esto significa que todas las solicitudes ingresarán un nuevo contacto en la base de datos, independientemente de si ya existen o no.</td> </tr><tr><td>inp_*xx*</td> <td>Éstos son todos los campos utilizados en la transacción, con *xx* reemplazado por la ID del campo.</td> </tr><tr><td>f</td> <td>Este es el ID del formulario que utiliza la transacción y es necesaria para activar el correo electrónico. **Nota:** Si usted está utilizando register_bg.php y omite este parámetro, la solicitud HTTP solo escribirá los valores correspondientes a la base de datos sin activar el correo electrónico.</td> </tr><tr><td style="background: white;">optin*</td> <td style="background: white;">Éste es el estado opt-in del contacto. Se utilizan valores de texto, por ej. *y*=VERDADERO, *n*=FALSO.</td> </tr><tr><td style="background: white;">del</td> <td style="background: white;">Éste es un parámetro booleano, lo que significa que puede tener sólo uno de estos dos valores:*1* (=VERDADERO) o *0* (=FALSO). Si el valor se da como 1, cuando esta feed devuelva un contacto, se eliminarán todas sus entradas en la base de datos y sólo se mantendrán las contenidas en la feed misma. Esto puede utilizarse para asegurarse de que sólo los valores ingresados por medio de esta feed permanezcan en la base de datos.</td> </tr><tr><td style="background: white;">newsletter</td> <td style="background: white;">Éste es el opt-in utilizado para newsletters. Debe contener el ID del formulario del newsletter al cual está suscrito el contacto.</td> </tr><tr><td style="background: white;">landing</td> <td style="background: white;">Aquí puede especificar la URL de una página de bienvenida, como por ejemplo, un mensaje de confirmación de registro.</td> </tr></tbody></table><sup>*</sup> La información de aceptación no es obligatoria, pero debería incluirse para todas las HTTP feeds, excepto para las que son parte de un registro opt-in doble.

#### <span class="mw-headline" id="Ejemplo_de_register_bg">Ejemplo de register_bg<a name="bs-ue-jumpmark-683746c17cac5d3e5ae142317a88125e"></a></span>

 A continuación se muestra un ejemplo de la clase de información que usted podría querer recoger en su página web para luego enviarla a Suite a través de register_bg.php:

<table border="1" cellpadding="1" class="wikitable" style="width: 100%;"><thead><tr><th>Información</th> <th>Parámetro</th> <th>Valor</th> </tr></thead><tbody><tr><td>ID de cuenta</td> <td>owner_id</td> <td>987654321</td> </tr><tr><td>ID de formulario de registro de Suite</td> <td>f</td> <td>1234</td> </tr><tr><td>Tratamiento</td> <td>inp_46</td> <td>Sr.</td> </tr><tr><td>Nombre</td> <td>inp_1</td> <td>Joe</td> </tr><tr><td>Apellido</td> <td>inp_2</td> <td>Bloggs</td> </tr><tr><td>Dirección de correo electrónico</td> <td>inp_3</td> <td>joe.bloggs@example.com</td> </tr><tr><td>Clave externa</td> <td>key_id</td> <td>Se utiliza la dirección de correo electrónico</td> </tr><tr><td>Estado de opt-in del contacto</td> <td>optin</td> <td>VERDADERO (TRUE)</td></tr></tbody></table> Si se crea una HTTP feed con los valores de la tabla anterior, se obtiene la siguiente URL: `<a class="external free" href="https://www.emarsys.net/u/register_bg.php?owner_id=123456789&key_id=3&optin=y&f=1234&inp_46=1&inp_1=Joe&inp_2=Bloggs&inp_3=joe.bloggs@example.com" rel="nofollow" target="_blank">https://www.emarsys.net/u/register_bg.php?owner_id=123456789&key_id=3&optin=y&f=1234&inp_46=1&inp_1=Joe&inp_2=Bloggs&inp_3=joe.bloggs@example.com</a>`

<table border="0" cellpadding="1" class="wikitable" style="width: 100%; border-width: 0px; border-style: solid;"><thead><tr><th style="text-align: left; border-color: #fff; background-color: #fff; color: #eb5a19;">**Recuerde que:**</th> </tr></thead><tbody><tr><td style="text-align: left; border-color: #fff; background-color: #fff; color: #555555;">Si usted utiliza un campo de opción múltiple para capturar información y desea incluir más de un valor, cada valor debe ingresarse de forma separada y el parámetro debe estar seguido de corchetes [ ]; de otro modo, sólo se tomará el último valor</td></tr></tbody></table>  

- Uso correcto: inp_100[]=1&inp_100[]=4&inp_100[]=7
- Uso incorrecto: inp_100=1&4&7

 Donde *100* es el ID de campo y *1*, *4* y *7* son los ID de los valores que desea enviar.

<span class="mw-headline" id="Restricciones_del_uso_de_solicitudes_HTTP">Restricciones del uso de solicitudes HTTP<a name="bs-ue-jumpmark-4a146a5027bf2e106653596fe3fb0b50"></a></span>
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

 Si bien son rápidas y fáciles de configurar, las implementaciones descritas tienen algunas limitaciones que debería considerar:

- Las solicitudes se limitan a uno cada 15 segundos por razones de seguridad.
- Si un contacto realiza envíos repetidos, se envían solicitudes repetidas.
- Es engorroso editar campañas ante eventos activas
- Las campañas ante eventos estándar no tienen análisis de respuesta con el transcurso del tiempo
- Deben crearse campos personalizados y sus variables asociadas para cada solicitud por adelantado. Esto puede generar grandes cantidades de datos en la base de datos que se utilizan con poca frecuencia. Por ejemplo, un correo electrónico para confirmación de órdenes necesitaría campos como product_name_1, product_price_1, product_vat_1, product_name_2, …, etc.
- Si desea mostrar contenido repetido en sus propias secciones (por ej. mostrar productos múltiples con sus imágenes y descripciones), debe crear todas las secciones por adelantado y utilizar la segmentación de secciones para mostrarlos. Una gran cantidad de secciones en la campaña de correo electrónico también afectará adversamente la velocidad de lanzamiento del correo electrónico.

 Por estas razones, se recomienda siempre utilizar el API de Suite si usted cuenta con recursos de desarrollo.

### <span class="mw-headline" id="Manejo_de_errores">Manejo de errores<a name="bs-ue-jumpmark-d18de3a2bebd7ac1eb94e6d463803694"></a></span>

 Los registros se enviarán como un mensaje HTTP regular, con los correspondientes códigos de error.

<table border="1" cellpadding="1" class="wikitable" style="width: 100%;"><thead><tr><th>Ejemplos de respuestas correctas:</th> </tr></thead><tbody><tr><td>HTTP/1.0 200 OK insert user_id=11223344 (para un registro de nuevo usuario)</td> </tr><tr><td>HTTP/1.0 200 OK update user_id=11223344 (para una actualización de perfil de contacto)</td> </tr></tbody><thead><tr><th>Ejemplos de respuestas erróneas:</th> </tr></thead><tbody><tr><td>HTTP/1.0 400 Bad Request</td> </tr><tr><td>HTTP/1.0 405 Method Not Allowed</td> </tr><tr><td>HTTP/1.0 503 Service Unavailable</td></tr></tbody></table> Vea una lista completa de códigos de error HTTP en: <http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html>.

<span class="mw-headline" id="Configuraci.C3.B3n_de_HTTP_feeds">Configuración de HTTP feeds<a name="bs-ue-jumpmark-6f5454e0adbc023c15c7fea25be7db97"></a></span>
----------------------------------------------------------------------------------------------------------------------------------------------------------------

 Las HTTP feeds puede configurarse mediante un proceso simple de cinco pasos:

1. Preparar los campos de la base de datos
2. Crear el formulario
3. Crear la HTTP feed personalizada
4. Crear el correo electrónico transaccional (de ser necesario)
5. Implementar la HTTP feed en su tienda Web o en una aplicación de terceros

 A continuación, estos pasos se describen de forma detallada.

### <span class="mw-headline" id="Paso_1:_Preparaci.C3.B3n_de_los_campos_de_la_base_de_datos">Paso 1: Preparación de los campos de la base de datos<a name="bs-ue-jumpmark-1ef279ef95e1ede792b8af01cd260a3c"></a></span>

 Los campos de la base de datos se usan para capturar contenido en la transacción y mostrarlo en el correo electrónico, como por ejemplo, nombre, referencia de reserva, etc. Este contenido se envía a la base de datos vía la HTTP feed y desde allí se agrega al correo electrónico mediante las variables de personalización. Para poder incluir un campo en la HTTP feed, se requiere la ID del campo. Para los campos de sistema, los ID se enumeran en documento *ID y valores de los campos de Suite*. Para los campos personalizados, debe abrir el campo en el diálogo **Generador de campo** en Suite. Para hacerlo, vaya al menú **Administración**, **Editor de campo**, seleccione el campo y haga clic en **Editar**. Puede encontrar el ID del campo en la barra de dirección del navegador del **Generador de campo** y se enumera como *field_id=xxxx* donde *x* es un valor numérico (por ej. *field_id=1234*). [![Búsqueda del ID del campo y el ID del valor para un campo de opción múltiple](/assets/images/2014/04/Using_HTTP_Feeds_1.png)](/assets/images/2014/04/Using_HTTP_Feeds_1.png "Búsqueda del ID del campo y el ID del valor para un campo de opción múltiple") Para los campos de opción simple y múltiple, también necesitará conocer los ID de los valores fijos ingresados manualmente (para todos los otros campos, puede ingresar los valores de modo manual). Puede encontrar las ID de la siguiente manera:

- Campos de sistema: documento *ID y valores de los campos de Suite*.
- Campos personalizados: en el **Generador de campo**, pase el mouse sobre el icono (**X**) de eliminar para cada valor y verá el ID en la parte inferior izquierda del diálogo (que se muestra como *javascript:this.disabled=true;DeleteAtt(‘3’)* donde *3* es el ID del valor).

 Después de seleccionar y preparar los campos que utilizará, anote sus nombres e ID para utilizarlos en los pasos 3 y 4.

### <span class="mw-headline" id="Paso_2:_Creaci.C3.B3n_del_formulario">Paso 2: Creación del formulario<a name="bs-ue-jumpmark-3a0b77eb2981c61796993b0f8631dcbf"></a></span>

 Cada HTTP feed necesita su propio formulario de registro. Para crear un formulario, abra el **Administrador de formularios**, elija **Registro general** en el menú desplegable **Crear nuevo** y haga clic en **Crear**. Según el tipo de HTTP feed utilizado, ahora debe completar el formulario y agregarle sus campos seleccionados (si usa register.php), o dejarlo y sólo utilizar el ID para activar correos electrónicos (si usa register_bg.php). Para encontrar el ID del formulario, pase el cursor sobre los íconos a la derecha de la lista de **Formularios** (Ver, Editar, Eliminar). El ID del formulario se muestra en la parte inferior izquierda de la ventana de su navegador como: *javascript:Preview(‘2955’);* donde *2955* es la ID del formulario. De forma alternativa, abra la vista previa del formulario y el ID se mostrará en la barra de dirección del navegador como: *f=2955*. [![Búsqueda de el ID de un formulario](/assets/images/2014/04/Using_HTTP_Feeds_2.png)](/assets/images/2014/04/Using_HTTP_Feeds_2.png "Búsqueda de el ID de un formulario")

### <span class="mw-headline" id="Paso_3:_Creaci.C3.B3n_de_la_HTTP_feed_personalizada">Paso 3: Creación de la HTTP feed personalizada<a name="bs-ue-jumpmark-2640f0d50046fb22db66359a48575067"></a></span>

 El paso siguiente es definir la HTTP feed que envía los datos que activan la actualización de la base de datos y/o el correo electrónico transaccional. Esta feed es una URL y se forma de la siguiente manera: 1. URL - ésta es la URL que contiene el dominio del entorno de su cuenta Suite y será una entre:

- https://www.emarsys.net/u
- https://www1.emarsys.net/u
- https://login.emarsys.net/u
- https://suite.emarsys.net/u
- https://suite5.emarsys.net/u
- https://suite6.emarsys.net/u
- https://suite7.emarsys.net/u

 2. Tipo de HTTP feed – se refiere al archivo utilizado para la feed y puede ser, ya sea:

- register_bg.php?
- register.php?

 3. Parámetros: estos contienen todos los datos necesarios requeridos para identificar el correo electrónico, agregar contenido y lanzarlo. Los parámetros múltiples pueden separarse con '&'. Por lo tanto, un ejemplo de URL sería algo así: `<a class="external free" href="https://www.emarsys.net/u/register_bg.php?parameter=value&parameter=value&parameter=value(%E2%80%A6)" rel="nofollow" target="_blank">https://www.emarsys.net/u/register_bg.php?parameter=value&parameter=value&parameter=value(…)</a>`

### <span class="mw-headline" id="Paso_4:_Creaci.C3.B3n_del_correo_electr.C3.B3nico_transaccional_en_Suite">Paso 4: Creación del correo electrónico transaccional en Suite<a name="bs-ue-jumpmark-b3cc2b3de6f04130ebea53484858e65c"></a></span>

 Si desea activar un correo electrónico transaccional con la HTTP feed, cuando haya completado los pasos anteriores debe crear una campaña de correo electrónico. Esta campaña debe ser una campaña ante eventos, sobre la base de un formulario de registro, con el formulario de registro de la feed transaccional seleccionado. Por ejemplo: [![Creación de la campaña de correo electrónico ante eventos transaccional](/assets/images/2014/04/Using_HTTP_Feeds_3.png)](/assets/images/2014/04/Using_HTTP_Feeds_3.png "Creación de la campaña de correo electrónico ante eventos transaccional") En la página Creación de contenido agregue los campos que deberían mostrarse al usar las variables de personalización. El ejemplo a continuación muestra cómo se visualiza un correo electrónico de confirmación de reserva en Suite: [![Uso de variables de personalización en el correo electrónico](/assets/images/2014/04/Using_HTTP_Feeds_4.png)](/assets/images/2014/04/Using_HTTP_Feeds_4.png "Uso de variables de personalización en el correo electrónico") Y así es cómo podría mostrarse en el correo electrónico mismo: [![Llenado de las variables de personalización vía la HTTP feed](/assets/images/2014/04/Using_HTTP_Feeds_5.png)](/assets/images/2014/04/Using_HTTP_Feeds_5.png "Llenado de las variables de personalización vía la HTTP feed") Una vez que haya terminado de crear su campaña, vaya a **Programación** y seleccione si el correo electrónico se enviará inmediatamente después de que se haya recibido el envío, o con una demora (en horas o días). Después de verificar la personalización, puede activar la campaña de correo electrónico, y el correo electrónico transaccional estará listo para lanzarse.

### <span class="mw-headline" id="Paso_5:_Implementaci.C3.B3n_de_HTTP_feed">Paso 5: Implementación de HTTP feed<a name="bs-ue-jumpmark-5317708eb38da294c5e86184aa640bd7"></a></span>

 Una vez que todos los pasos anteriores se hayan completado, simplemente pase su URL al administrador de su tienda Web (u otra aplicación de software) e indíqueles que envíen esta solicitud de acuerdo con sus requisitos. Esta es la única parte del proceso que requiere cierto grado de conocimiento técnico. Una vez que se complete este paso, la HTTP feed estará activa y en operación.